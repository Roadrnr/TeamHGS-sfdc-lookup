@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}

<div class="text-center">
    <h1 class="display-4">Welcome</h1>
</div>
@if (!Model.IsAuthenticated)
{
    <div class="row">
        <div class="col-md-12">
            <a href="@Model.ReturnUrl" class="btn btn-primary">Log In with Salesforce</a>
        </div>
    </div>
}
else
{
    <h2>Congratulations! You're logged in.</h2>
    <a asp-page="/GetUsers">Get Users</a>
    <h3>Lookup</h3>
    <form>
        <input type="text" id="Name" name="Name" value="" placeholder="Name" />
        <input type="text" id="Email" name="Email" value="" placeholder="Email Address" />
        <input type="text" id="Company" name="Company" value="" placeholder="Company" /><br/>
                                                                                        <select asp-for="ObuId">
                                                                                            <option value="0">- Select OBU -</option>
                                                                                            <option value="1">All</option>
                                                                                            <option value="2">NACET</option>
                                                                                        </select><br />
        <input type="submit" value="Submit" />
    </form>

    <table>
        <thead>
        <tr>
            <th>Id</th>
            <th>Name</th>
            <th>Email</th>
            <th>Account</th>
            <th>OBU</th>
        </tr>
        </thead>
        <tbody>
            @foreach (var a in Model.Accounts)
            {
                <tr>
                    <td>@a.Id</td>
                    <td>@a.Name</td>
                    <td>@a.Email</td>
                    <td>@a.AccountId</td>
                    <td>@a.Originating_Business_Unit__c</td>
                </tr>
            }
        </tbody>
    </table>

    <h3>Refresh Token</h3>
    <a asp-page="GetRefreshToken" asp-route-token="@Model.SalesForceCredential.RefreshToken">Refresh the Token</a>
}